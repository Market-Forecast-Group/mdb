<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_31) on Mon Feb 16 15:51:58 CET 2015 -->
<title>org.mfg.mdb.compiler (MFG Database (MDB))</title>
<meta name="date" content="2015-02-16">
<link rel="stylesheet" type="text/css" href="../../../../styles.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.mfg.mdb.compiler (MFG Database (MDB))";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../overview.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../org/mfg/mdb/demo/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/mfg/mdb/compiler/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.mfg.mdb.compiler</h1>
<div class="docSummary">
<div class="block">This package contains the compiler to transform the database schema definition into the set of Java files to manipulate the databases.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/ICompilerExtension.html" title="interface in org.mfg.mdb.compiler">ICompilerExtension</a></td>
<td class="colLast">
<div class="block">
 This is the interface to extend the MDB compiler.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/ICompilerListener.html" title="interface in org.mfg.mdb.compiler">ICompilerListener</a></td>
<td class="colLast">
<div class="block">An interface to listen the files created by the compiler.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/IExtensionTargets.html" title="interface in org.mfg.mdb.compiler">IExtensionTargets</a></td>
<td class="colLast">
<div class="block">The extension targets are the points of an MDB class where the user can
 inject custom code via a compiler extension.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/Column.html" title="class in org.mfg.mdb.compiler">Column</a></td>
<td class="colLast">
<div class="block">Definition of a column.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/Compiler.html" title="class in org.mfg.mdb.compiler">Compiler</a></td>
<td class="colLast">
<div class="block">
 This is the main class of MDB, use this to define a database schema and
 compile it.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/Schema.html" title="class in org.mfg.mdb.compiler">Schema</a></td>
<td class="colLast">
<div class="block">The schema of the database.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/SchemaEditor.html" title="class in org.mfg.mdb.compiler">SchemaEditor</a></td>
<td class="colLast">
<div class="block">A simple graphical editor for the MDB schemas.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/Table.html" title="class in org.mfg.mdb.compiler">Table</a></td>
<td class="colLast">
<div class="block">Definition of a table.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/Order.html" title="enum in org.mfg.mdb.compiler">Order</a></td>
<td class="colLast">
<div class="block">The order of a column.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/mfg/mdb/compiler/Type.html" title="enum in org.mfg.mdb.compiler">Type</a></td>
<td class="colLast">
<div class="block">The type of a column.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.mfg.mdb.compiler Description">Package org.mfg.mdb.compiler Description</h2>
<div class="block"><p>This package contains the compiler to transform the database schema definition into the set of Java files to manipulate the databases.</p>
 <h2>Workflow</h2>
 <p>MDB uses a compiler to transform a database schema definition into a set of Java files that the developer include in his project to handle the MDB databases.</p>
 <p>This is the workflow of the MDB usage:</p>
 <ul>
        <li>Create a database schema</li>
  <li>Compile the schema</li>
  <li>Import the generated Java files into your project.</li>
 </ul>
 <h3>Create a database schema</h3>
 <p>
 The schema is very simple, it is formed by table definitions, each table definition contains column definitions.  
 </p>
 <p>
 This is a visual representation of a schema defined in <a href="../../../../src-html/org/mfg/mdb/demo/Demo_02_SchemaDefinition.html#line.33">Demo 02: Simple schema definition</a>. 
 </p>
 Table: <b>Price</b>
  <table border=1>
  <caption>Price definition</caption>
        <tr>
                <td>Column</td>
                <td>Type</td>
                <td>Order</td>
                <td>Virtual</td>
                <td>Formula</td>
        </tr>
 <tr>
                <td>time</td>
                <td>INTEGER</td>
                <td>ASCENDING</td>
                <td>No</td>
                <td></td>
        </tr>
 <tr>
                <td>price</td>
                <td>LONG</td>
                <td>NONE</td>
                <td>No</td>
                <td></td>
        </tr>
 </table>
 <p>
 The table contains the following elements.
 </p>
 <ul>
 <li><b>Column</b>: the name of the column. This name should be a Java valid identifier because 
 the same name is used in variables in the generated Java code.</li>
 <li><b>Type</b>: the type of the column. It can be a primitive type or a compound type like array or String. 
 This enum <a href="../../../../org/mfg/mdb/compiler/Type.html" title="enum in org.mfg.mdb.compiler"><code>Type</code></a> contains all the possible values.</li>
 <li><b>Order</b>: the order of the values of this column, like ascendent or descendant or none. See <a href="../../../../org/mfg/mdb/compiler/Order.html" title="enum in org.mfg.mdb.compiler"><code>Order</code></a>. 
 If you define a column as ordered you should be fully 
 sure all values will respect that order, otherwise certain methods associated with binary searches do not work properly.</li>
 <li><b>Virtual</b>: It is a flag to indicate if the column  is virtual or not. A virtual column is a column where the 
 values are not saved in the database, else they are computed based on a Java formula.</li>
 <li><b>Formula</b>: The formula used to compute the value of this column (in case this is a virtual column). The formula is a String with a Java valid expression.
 In this expression you can use special identifiers like $$ and $pos$, this first will be expanded with the value of the current record, and the second with the the position of the current record. 
 For example, if you want this column to have the half of the value of the "price" column, you can write a formula like: "$$.price / 2".
 TODO [897587]: reference a demo of a virtual column.
 </li>
 </ul>
 
 <h3>Compile the schema</h3>
 
 <p>As we show in <a href="../../../../src-html/org/mfg/mdb/demo/Demo_02_SchemaDefinition.html#line.33">Demo 02</a> compile the schema is just one line of code.
 You create an instance of the compiler and call the method "execute":</p>
 <pre>
 DemoCompiler demo = new DemoCompiler();
 demo.compile("/path/to/project/src");
 </pre>
 <p>
 Usually Java projects contains a special folder "src" where all the Java files are placed. The path to that folder is the one we call "/path/to/project/src" in the previous code. 
 </p>
 <p>
 If your schema contains N tables, then N + 1 files are generated: one file per table (with the "MDB" prefix) and other file which represent the session (with the "MDBSession" prefix).
 </p>
 
 <h3>Import the generated files in your Java project</h3>
 <p>
 Since the files are copied into the "src" of your project you have to do practically nothing to include them, 
 probably you only need to refresh the workspace of your Java IDE. One time you see these files in your project you will get a couple of compile errors,
 it is because you need to add the MDB Runtime to the classpath.  
 </p>
 <p>
 The MDB Runtime is distributed in a JAR file (org.mfg.mdb.runtime.jar) separately from the compiler JAR (org.mfg.mdb.compiler.jar).
 You have to add that JAR to the classpath of your project and the errors will disappear.   
 </p>
 
 <h2>Preserving user code</h2>
 <p>
 MDB Compiler uses a template engine called <a href="../../../../org/mfg/mya/package-summary.html">MyA</a>. One of the features of this component is that 
 it allows to preserve some code when a file overridden. If you open the files generated by the compiler there are comments like:
 </p>
 <pre>
 /&lowast; BEGIN USER MDB &lowast;/
 
 <b>/&lowast; User can insert his code here &lowast;/</b>
 
 /&lowast; END USER MDB &lowast;/
 </pre>
 <p>
 That comment means, that the developer can write its own code inside a generated file, and this code will be preserved if the compiler 
 is executed again, if the file is overridden. This allow certain customization and extensibility of the generated code. For example you can add
 helper methods or implement extra interfaces.
 </p>
 <p>
 For more details about MyA go to its <a href="../../../../org/mfg/mya/package-summary.html">package overview</a>.
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>arian</dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../overview.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../org/mfg/mdb/demo/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/mfg/mdb/compiler/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
